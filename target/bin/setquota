#! /bin/bash

DATABASE=${DATABASE:-/tmp/docker-mailserver/dovecot-quotas.cf}

USER="$1"
shift
QUOTA="$@"

usage() {
	echo "Usage: setquota <user@domain> <quota>"
}

errex() {
	echo "$@" 1>&2
	exit 1
}

[ -z "$USER" ] && { usage; errex "no username specified"; }
[ -z "$QUOTA" ] && { usage; errex "no quota specified"; }

delquota "$USER" && addquota "$USER" "$QUOTA"
